# Частые вопросы

## Что такое APatch?

::: info
[Здесь](/ru/what-is-apatch) вы можете найти более полную информацию
:::

APatch - это root-решение, похожее на Magisk или KernelSU и являющееся одним из лучших. Оно сочетает в себе простой и удобный метод установки через `boot.img` как у Magisk и мощные возможности KernelSU по исправлению ядра.

## В чем разница между APatch и Magisk?

Magisk изменяет систему `init` с помощью патча `ramdisk` вашего загрузочного образа. APatch же патчит ядро напрямую.

## В чем разница между APatch и KernelSU?

KernelSU требует исходный код ядра вашего устройства, который не всегда предоставляется OEM-производителем (вендором). APatch же требует лишь ваш изначальный `boot.img`.

## В чем разница между APatch, Magisk и KernelSU?

APatch позволяет опционально не изменять SELinux, что означает, что поток приложения может быть рутирован без `libsu` и `IPC`.

Так же есть модули ядра - **KPModule**.

## Что такое KPModule?

Модуль, который может выполнять код в пространстве ядра, подобно **Loadable Kernel Modules** (LKM, загружаемые модули ядра).

Кроме того, KPM предоставляет возможность выполнять `inline-hook` и `syscall-table-hook` в пространстве ядра.

Пожалуйста, прочтите [Как написать KPM](https://github.com/bmax121/KernelPatch/blob/main/doc/zh-CN/module.md) для более подробной информации.

## Взаимосвязь APatch и KernelPatch

APatch зависит от KernelPatch. Он унаследовал все его возможности и был расширен.

Вы можете установить только KernelPatch, но это не позволит вам использовать APM (APatch Modules).

Чтобы использовать управление суперпользователем, необходимо установить APatch и удалить KernelPatch.

[Узнайте больше о KernelPatch](https://github.com/bmax121/KernelPatch).

## Что такое SuperKey

KernelPatch добавляет новый системный вызов (syscall) для предоставления всех возможностей приложениям и программам в пользовательском пространстве. Этот системный вызов называется **SuperCall**. Когда приложение/программа пытается вызвать **SuperCall**, ей необходимо предоставить код доступа, известный как **SuperKey**. **SuperCall** может быть успешно вызван только в том случае, если **SuperKey** верен, а если он неверен, то вызывающая программа не будет исполнена.

## Как обрабатывается SELinux?

KernelPatch не изменяет контекст SELinux, а обходит SELinux через хук. Это позволяет вам рутировать поток Android в контексте приложения без необходимости использовать `libsu` для запуска нового процесса и последующего выполнения `IPC`.

Кроме того, APatch использует `magiskpolicy` для добавления дополнительной поддержки SELinux напрямую.

## Веб-интерфейс APM / KPM

Исходный код APatch был заимствован и модифицирован из KernelSU, поэтому APatch представил функцию WebUI в версии [10568](https://github.com/bmax121/APatch/releases/tag/10568) после того, как KernelSU представил функцию WebUI.

Реализация и требования к APatch WebUI полностью совпадают с KernelSU. WebUI, разработанный для модулей KernelSU, может прекрасно работать в APatch.

Если вы хотите разработать WebUI для APM или KPM, пожалуйста, обратитесь к [WebUI introduction](https://kernelsu.org/guide/module-webui.html) KernelSU для получения дополнительной информации.

## Не удается установить модули (ошибка os 2/5/22)?

Отзовите root права для приложения «shell» на странице суперпользователя.

## Приложение получает/теряет права root автоматически при перезагрузке устройства?

Прочтите [это](https://t.me/APatchChannel/74).

## Не можете использовать Шамико?

Мы не можем полностью поддерживать Shamiko из-за его закрытого исходного кода и отсутствия обновлений.
::: info
Если вам необходимо использовать Shamiko, пожалуйста, используйте версию [0.7.4](https://github.com/LSPosed/LSPosed.github.io/releases/tag/shamiko-188).
:::

## Поддерживается ли Zygisk?

APatch может использовать [ZygiskNext](https://github.com/Dr-TSNG/ZygiskNext) чтобы добавить поддержку Zygisk.

::: warning
Используйте официальную версию ZygiskNext, а не модифицированные (если только вы не можете подтвердить, что она безопасна)
По некоторым причинам мы рекомендуем использовать версию [0.9.1.1](https://github.com/Dr-TSNG/ZygiskNext/releases/tag/v4-0.9.1.1) ZygiskNext, если не возникло серьезных проблем, и вам не нужно использовать функцию WebUI.
:::

APatch также может использовать [Zygisk_mod](https://github.com/Admirepowered/Zygisk_mod) для добавления поддержки Zygisk.

Если вам нужно использовать только LSPosed без других функций Zygisk, вы также можете попробовать [Zloader](https://github.com/Mufanc/z-loader) [for LSPosed](https://t.me/mufanc_chan/28) для упрощенной загрузки LSPosed.

::: warning
Zloader НЕ совместим ни с одной из реализаций Zygisk, например ZygiskNext / Zygisk_mod, пожалуйста, отключите или удалите любую реализацию Zygisk перед использованием Zloader.
:::

::: info
Zloader все еще находится на ранней стадии разработки, приглашаем вас отправлять Pull-запросы разработчикам Zloader или открывать проблемы по любым вопросам использования.
:::

## Не можете пройти приложение для обнаружения root?

Если ваши программы работают нормально, не стоит слишком беспокоиться о программах-обнаружителях.
